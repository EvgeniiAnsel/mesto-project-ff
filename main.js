(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(t,r,n){return(r=function(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var n="https://mesto.nomoreparties.co/v1/".concat("wff-cohort-27","/"),o=function(e,o){return fetch(new URL(e,n),function(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({headers:{authorization:"25c7281b-ee62-429d-9090-7b85d165a07d","Content-Type":"application/json"}},o)).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))};function i(e){e.classList.add("popup_is-opened"),e.classList.remove("popup_is-animated"),document.addEventListener("keydown",u)}function c(e){e.classList.add("popup_is-animated"),e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",u)}function u(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&c(t)}}var a=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove("popup__button_disabled"),t.disabled=!1):(t.classList.add("popup__button_disabled"),t.disabled=!0)},p=function(){document.querySelectorAll(".form__input-error").forEach((function(e){e.textContent=""})),document.querySelectorAll(".popup__input").forEach((function(e){e.classList.remove("popup__input_type_error")}))};document.querySelector(".logo").src=logo;var l=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),d=document.querySelector(".popup_type_edit"),f=document.querySelector(".popup_type_new-card"),m=document.querySelectorAll(".popup__close"),y=d.querySelector(".popup__form"),_=f.querySelector(".popup__form"),v=d.querySelector('input[name="name"]'),b=d.querySelector('input[name="description"]'),S=document.querySelector(".places__list");function q(e){document.querySelector(".profile__title").textContent=e.name,document.querySelector(".profile__description").textContent=e.about,document.querySelector(".profile__avatar").src=e.avatar}function h(e){var t=function(e,t){var r=t.handleDelete,n=t.handleLike,o=t.handleImageClick,i=document.querySelector("#card-template").content.cloneNode(!0).querySelector(".card"),c=i.querySelector(".card__image"),u=i.querySelector(".card__title"),a=i.querySelector(".card__like-button"),p=i.querySelector(".card__delete-button");return c.src=e.link,c.alt=e.name,u.textContent=e.name,a.addEventListener("click",(function(){return n(a,e._id)})),p.addEventListener("click",(function(){return r(i,e._id)})),c.addEventListener("click",(function(){return o(e)})),i}(e,{handleDelete:handleDeleteCard,handleLike:handleLikeCard,handleImageClick:function(e){var t=document.querySelector(".popup_type_image"),r=t.querySelector(".popup__image"),n=t.querySelector(".popup__caption");r.src=e.link,r.alt=e.name,n.textContent=e.name,i(t)}});S.prepend(t)}m.forEach((function(e){e.addEventListener("click",(function(){c(e.closest(".popup"))}))})),l.addEventListener("click",(function(){v.value=profile.name,b.value=profile.description,p(),i(d)})),y.addEventListener("submit",(function(e){e.preventDefault();var t,r={name:v.value,about:b.value};(t=r,o("users/me",{method:"PATCH",body:JSON.stringify(t)})).then((function(){profile.name=r.name,profile.description=r.about,q(profile),c(d)}))})),s.addEventListener("click",(function(){return i(f)})),_.addEventListener("submit",(function(e){e.preventDefault();var t,r=_.querySelector('input[name="place-name"]').value,n=_.querySelector('input[name="link"]').value;r&&n&&(t={name:r,link:n},o("cards",{method:"POST",body:JSON.stringify(t)})).then((function(e){h(e)})),c(f),_.reset(),p()})),o("users/me").then((function(e){profile.name=e.name,profile.description=e.about,profile.avatar=e.avatar,q(e)})),o("cards").then((function(e){e.forEach(h)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__input")),r=e.querySelector(".popup__button");a(t,r),t.forEach((function(n){n.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),r.textContent="",r.classList.remove("popup__error_visible")}(e,t):function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add("popup__input_type_error"),n.textContent=r,n.classList.add("popup__error_visible")}(e,t,t.validationMessage)}(e,n),a(t,r)}))}))}(e)}))})();